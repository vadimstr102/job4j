## JSPJSTL

[1. Что такое _Java Server Pages (JSP)_?](#1-Что-такое-java-server-pages-jsp)

[2. Зачем нужен JSP?](#2-Зачем-нужен-jsp)

[3. Опишите, как обрабатываются JSP страницы, начиная от запроса к серверу, заканчивая ответом пользователю.](#3-Опишите-как-обрабатываются-jsp-страницы-начиная-от-запроса-к-серверу-заканчивая-ответом-пользователю)

[4. Расскажите об этапах (фазах) жизненного цикла JSP.](#4-Расскажите-об-этапах-фазах-жизненного-цикла-jsp)

[5. Расскажите о методах жизненного цикла JSP.](#5-Расскажите-о-методах-жизненного-цикла-jsp)

[6. Какие методы жизненного цикла JSP могут быть переопределены?](#6-Какие-методы-жизненного-цикла-jsp-могут-быть-переопределены)

[7. Как можно предотвратить прямой доступ к JSP странице из браузера?](#7-Как-можно-предотвратить-прямой-доступ-к-jsp-странице-из-браузера)

[8. Какая разница между _динамическим_ и _статическим_ содержимым JSP?](#8-Какая-разница-между-динамическим-и-статическим-содержимым-jsp)

[9. Как закомментировать код в JSP?](#9-Как-закомментировать-код-в-jsp)

[10. Какие существуют основные типы тегов JSP?](#10-Какие-существуют-основные-типы-тегов-jsp)

[11. Что вы знаете о действиях JSP (_Action tag_ и _JSP Action Elements_).](#11-Что-вы-знаете-о-действиях-jsp-action-tag-и-jsp-action-elements)

[12. Взаимодействие _JSP - сервлет - JSP_.](#12-Взаимодействие-jsp---сервлет---jsp)

[13. Какие области видимости переменных существуют в JSP?](#13-Какие-области-видимости-переменных-существуют-в-jsp)

[14. Какие неявные, внутренние объекты и методы есть на JSP странице?](#14-Какие-неявные-внутренние-объекты-и-методы-есть-на-jsp-странице)

[15. Какие неявные объекты не доступны в обычной JSP странице?](#15-Какие-неявные-объекты-не-доступны-в-обычной-jsp-странице)

[16. Что вы знаете о `PageContext` и какие преимущества его использования?](#16-Что-вы-знаете-о-pagecontext-и-какие-преимущества-его-использования)

[17. Как сконфигурировать параметры инициализации для JSP?](#17-Как-сконфигурировать-параметры-инициализации-для-jsp)

[18. Почему не рекомендуется использовать скриплеты (скриптовые элементы) в JSP?](#18-Почему-не-рекомендуется-использовать-скриплеты-скриптовые-элементы-в-jsp)

[19. Можно ли определить класс внутри JSP страницы?](#19-Можно-ли-определить-класс-внутри-jsp-страницы)

[20. Что вы знаете о Языке выражений JSP (JSP Expression Language – EL)?](#20-Что-вы-знаете-о-Языке-выражений-jsp-jsp-expression-language--el)

[21. Какие типы EL операторов вы знаете?](#21-Какие-типы-el-операторов-вы-знаете)

[22. Назовите неявные, внутренние объекты JSP EL и их отличия от объектов JSP.](#22-Назовите-неявные-внутренние-объекты-jsp-el-и-их-отличия-от-объектов-jsp)

[23. Как отключить возможность использования EL в JSP?](#23-Как-отключить-возможность-использования-el-в-jsp)

[24. Как узнать тип HTTP метода используя JSP EL?](#24-Как-узнать-тип-http-метода-используя-jsp-el)

[25. Что такое _JSTL (JSP Standard tag library)_?](#25-Что-такое-jstl-jsp-standard-tag-library)

[26. Из каких групп тегов состоит библиотека _JSTL_?](#26-Из-каких-групп-тегов-состоит-библиотека-jstl)

[27. Какая разница между `<c:set>` и `<jsp:useBean>`?](#27-Какая-разница-между-cset-и-jspusebean)

[28. Чем отличается `<c:import>` от `<jsp:include>` и директивы `<%@include %>`?](#28-Чем-отличается-cimport-от-jspinclude-и-директивы-include-)

[29. Как можно расширить функциональность JSP?](#29-Как-можно-расширить-функциональность-jsp)

[30. Что вы знаете о написании пользовательских JSP тегов?](#30-Что-вы-знаете-о-написании-пользовательских-jsp-тегов)

[31. Приведите пример использования собственных тегов.](#31-Приведите-пример-использования-собственных-тегов)

[32. Как сделать перенос строки в HTML средствами JSP?](#32-Как-сделать-перенос-строки-в-html-средствами-jsp)

[33. Почему не нужно конфигурировать стандартные JSP теги в `web.xml`?](#33-Почему-не-нужно-конфигурировать-стандартные-jsp-теги-в-webxml)

[34. Как можно обработать ошибки JSP страниц?](#34-Как-можно-обработать-ошибки-jsp-страниц)

[35. Как происходит обработка ошибок с помощью JSTL?](#35-Как-происходит-обработка-ошибок-с-помощью-jstl)

[36. Как конфигурируется JSP в дескрипторе развертывания.](#36-Как-конфигурируется-jsp-в-дескрипторе-развертывания)

[37. Можно ли использовать Javascript на JSP странице?](#37-Можно-ли-использовать-javascript-на-jsp-странице)

[38. Всегда ли создается объект сессии на JSP странице, можно ли отключить его создание?](#38-Всегда-ли-создается-объект-сессии-на-jsp-странице-можно-ли-отключить-его-создание)

[39. Какая разница между `JSPWriter` и сервлетным `PrintWriter`?](#39-Какая-разница-между-jspwriter-и-сервлетным-printwriter)

[40. Опишите общие практические принципы работы с JSP.](#40-Опишите-общие-практические-принципы-работы-с-jsp)

## 1. Что такое _Java Server Pages (JSP)_?

__JSP (JavaServer Pages)__ — платформонезависимая переносимая и легко расширяемая технология разработки веб-приложений, 
позволяющая веб-разработчикам создавать содержимое, которое имеет как статические, так и динамические компоненты. 
Страница JSP содержит текст двух типов: статические исходные данные, которые могут быть оформлены в одном из текстовых 
форматов HTML, SVG, WML, или XML, и _JSP-элементы_, которые конструируют динамическое содержимое. 
Кроме этого могут использоваться _библиотеки JSP-тегов_, а также _EL (Expression Language)_, для внедрения Java-кода в статичное содержимое JSP-страниц.

Код JSP-страницы транслируется в Java-код сервлета с помощью компилятора JSP-страниц _Jasper_, и затем компилируется в байт-код JVM. 

JSP-страницы загружаются на сервере и управляются Java EE Web Application. Обычно такие страницы упакованы в файловые архивы .war и .ear.

https://www.tutorialspoint.com/jsp/index.htm

[к оглавлению](#jspjstl)

## 2. Зачем нужен JSP?

JSP расширяет технологию сервлетов обеспечивая возможность создания динамических страницы с HTML подобным синтаксисом.

Хотя создание представлений поддерживается и в сервлетах, но большая часть любой веб-страницы является статической, 
поэтому код сервлета в таком случае получается чересчур перегруженным, замусоренным и поэтому при его написании легко допустить ошибку. 

Еще одним преимуществом JSP является горячее развертывание - возможность заменить одну страницу на другую непосредственно 
в контейнере без необходимости перекомпилировать весь проект или перезапускать сервер.

Однако рекомендуется избегать написания серьёзной бизнес-логики в JSP и использовать страницу только в качестве представления.

[к оглавлению](#jspjstl)

## 3. Опишите, как обрабатываются JSP страницы, начиная от запроса к серверу, заканчивая ответом пользователю.

Когда пользователь переходит по ссылке на страницу `page.jsp`, он отправляет http-запрос на сервер `GET /page.jsp`. 
Затем, на основе этого запроса и текста самой страницы, сервер генерирует java-класс, компилирует его и выполняет полученный 
сервлет, формирующий ответ пользователю в виде представления этой страницы, который сервер и перенаправляет обратно пользователю.

[к оглавлению](#jspjstl)

## 4. Расскажите об этапах (фазах) жизненного цикла JSP.

Если посмотреть код внутри созданной JSP страницы, то он будет выглядеть как HTML и не будет похож на java класс. 
Конвертацией JSP страниц в HTML код занимается контейнер, который так же создает и сервлет для использования в веб приложении. 

Жизненный цикл JSP состоит из нескольких фаз, которыми руководит JSP контейнер:
+ __Translation__ – проверка и парсинг кода JSP страницы для создания кода сервлета. 
+ __Compilation__ – компиляция исходного кода сервлета.
+ __Class Loading__ – загрузка скомпилированного класса в память.
+ __Instantiation__ – внедрение конструктора без параметра загруженного класса для инициализации в памяти.
+ __Initialization__ – вызов `init()` метода объекта JSP класса и инициализация конфигурации сервлета с первоначальными 
параметрами, которые указаны в дескрипторе развертывания (`web.xml`). После этой фазы JSP способен обрабатывать запросы 
клиентов. Обычно эти фазы происходят после первого запроса клиента (т.е. ленивая загрузка), но можно настроить загрузку 
и инициализацию JSP на старте приложения по аналогии с сервлетами.
+ __Request Processing__ – длительный жизненный цикл обработки запросов клиента JSP страницей. 
Обработка является многопоточной и аналогична сервлетам — для каждого запроса создается новый поток, 
объекты `ServletRequest` и `ServletResponse`, происходит выполнение сервис методов.
+ __Destroy__ – последняя фаза жизненного цикла JSP, на которой её класс удаляется из памяти. 
Обычно это происходит при выключении сервера или выгрузке приложения.

[к оглавлению](#jspjstl)

## 5. Расскажите о методах жизненного цикла JSP.

Контейнер сервлетов (например, Tomcat, GlassFish) создает из JSP-страницы класс сервлета, наследующего свойства 
интерфейса `javax.servlet.jsp.HttpJspBase` и включающего следующие методы:
+ `jspInit()` — метод объявлен в JSP странице и реализуется с помощью контейнера. Этот метод вызывается один раз в жизненном 
цикле JSP для того, чтобы инициализировать конфигурационные параметры указанные в дескрипторе развертывания. 
Этот метод можно переопределить с помощью определения элемента _JSP scripting_ и указания необходимых параметров для инициализации;
+ `_jspService()` — метод переопределяется контейнером автоматически и соответствует непосредственно коду JSP, описанному 
на странице. Этот метод определен в интерфейсе `HttpJspPage`, его имя начинается с нижнего подчеркивания и он отличается 
от других методов жизненного цикла тем, что его невозможно переопределить;
+ `jspDestroy()` — метод вызывается контейнером для удаления объекта из памяти (на последней фазе жизненного цикла JSP - Destroy). 
Метод вызывается только один раз и доступен для переопределения, предоставляя возможность освободить ресурсы, которые были созданы в `jspInit()`.

[к оглавлению](#jspjstl)

## 6. Какие методы жизненного цикла JSP могут быть переопределены?

Возможно переопределить лишь `jspInit()` и `jspDestroy()` методы.

[к оглавлению](#jspjstl)

## 7. Как можно предотвратить прямой доступ к JSP странице из браузера?

Прямой доступ к директории `/WEB-INF/` из веб-приложения отсутствует. Поэтому JSP-страницы можно расположить внутри этой 
папки и тем самым запретить доступ к странице из браузера. Однако, по аналогии с описанием сервлетов, будет необходимо 
настроить дескриптор развертывания:

```xml
<servlet>
    <servlet-name>Example</servlet-name>
    <jsp-file>/WEB-INF/example.jsp</jsp-file>
    <init-param>
        <param-name>exampleParameter</param-name>
        <param-value>parameterValue</param-value>
    </init-param>
</servlet>
    
<servlet-mapping>
    <servlet-name>Example</servlet-name>
    <url-pattern>/example.jsp</url-pattern>
</servlet-mapping>
```

[к оглавлению](#jspjstl)

## 8. Какая разница между _динамическим_ и _статическим_ содержимым JSP?

Статическое содержимое JSP (HTML, код JavaScript, изображения и т.д.) не изменяется в процессе работы веб приложения. 

Динамические ресурсы созданы для того, чтобы отображать свое содержимое в зависимости от пользовательских действий. 
Обычно они представлены в виде выражений EL (Expression Language), библиотек JSP-тегов и пр.

[к оглавлению](#jspjstl)

## 9. Как закомментировать код в JSP?

+ `<!—- HTML комментарий; отображается на странице JSP —->` такие комментарии будут видны клиенту при просмотре кода страницы.
+ `<%—- JSP комментарий; не отображается на странице JSP —-%>` такие комментарии описываются в созданном сервлете и не 
посылаются клиенту. Для любых комментариев по коду или отладочной информации необходимо использовать именно такой тип комментариев.

[к оглавлению](#jspjstl)

## 10. Какие существуют основные типы тегов JSP?

+ _Выражение JSP_: `<%= expression %>` - выражение, которое будет обработано с перенаправлением результата на вывод;
+ _Скриплет JSP_: `<% code %>` - код, добавляемый в метод `service()`.
+ _Объявление JSP_: `<%! code %>` - код, добавляемый в тело класса сервлета вне метода `service()`.
+ _Директива JSP page_: `<%@ page att="value" %>` - директивы для контейнера сервлетов с информацией о параметрах.
+ _Директива JSP include_: `<%@ include file="url" %>` - файл в локальной системе, подключаемый при трансляции JSP в сервлет.
+ _Комментарий JSP_: `<%-- comment --%>` - комментарий; игнорируется при трансляции JSP страницы в сервлет.

[к оглавлению](#jspjstl)

## 11. Что вы знаете о действиях JSP (_Action tag_ и _JSP Action Elements_).

__Action tag__ и __JSP Action Elements__ предоставляют методы работы с Java Beans, подключения ресурсов, проброса запросов 
и создания динамических XML элементов. Такие элементы всегда начинаются с записи `jsp:` и используются непосредственно 
внутри страницы JSP без необходимости подключения сторонних библиотек или дополнительных настроек.

Наиболее часто используемыми JSP Action Elements являются:
+ `jsp:include`: `<jsp:include page="относительный URL" flush="true"/>` - подключить файл при запросе страницы. 
Если необходимо, чтобы файл подключался в процессе трансляции страницы, то используется директива `page` совместно с атрибутом `include`;
+ `jsp:useBean`: `<jsp:useBean att=значение*/>` или `<jsp:useBean att=значение*>...</jsp:useBean>` - найти или создать Java bean;
+ `jsp:setProperty`: `<jsp:setProperty att=значение*/>` - установить свойства Java bean, или явно, или указанием на 
соответствующее значение, передаваемое при запросе;
+ `jsp:forward`: `<jsp:forward page="относительный URL"/>` - передать запрос другой странице;
+ `jsp:plugin`: `<jsp:plugin attribute="значение"*>...</jsp:plugin>` - сгенерировать (в зависимости от типа браузера) 
тэги `OBJECT` или `EMBED` для апплета, использующего технологию Java Plugin.

[к оглавлению](#jspjstl)

## 12. Взаимодействие _JSP - сервлет - JSP_.

_«JSP - сервлет - JSP»_ архитектура построения приложений носит название _MVC (Model/View/Controller)_:
+ _Model_ - классы данных и бизнес-логики;
+ _View_ - страницы JSP;
+ _Controller_ - сервлеты.

[к оглавлению](#jspjstl)

## 13. Какие области видимости переменных существуют в JSP?

Область видимости объектов определяется тем контекстом в который помещается данный объект. 
В зависимости от той или иной области действия так же определяется время существования объекта. 

В JSP предусмотрены следующие области действия переменных (объектов):
+ `request` область действия запроса - объект будет доступен на текущей JSP странице, странице пересылки 
(при использовании `jsp:forward`) или на включаемой странице (при использовании `jsp:include`);
+ `session` область действия сессии - объект будет помещен в сеанс пользователя, будет доступен на всех JSP страницах и 
будет существовать пока существует сессия пользователя, или он не будет из нее принудительно удален.
+ `application` область действия приложения - объект будет доступен для всех пользователей на всех JSP страницах и будет 
существовать на протяжении всей работы приложения или пока не будет удален принудительно и контекста приложения.
+ `page` область действия страницы - объект будет доступен только на той странице, где он определен. 
На включаемых (`jsp:include`) и переадресуемых (`jsp:forward`) страницах данный объект уже не будет доступен.
Таким образом, чтобы объект был доступен всем JSP страницам, необходимо указать область видимости `application` или `session`, 
в зависимости от того требуется ли доступ к объекту всем пользователям или только текущему.
Для указания требуемой области действия при определении объекта на JSP странице используется атрибут scope тега `jsp:useBean`:

```
<jsp:useBean id="myBean" class="ru.javacore.MyBean" scope="session"/>
```

Если не указывать атрибут `scope`, то по умолчанию задается область видимости страницы `page`

[к оглавлению](#jspjstl)

## 14. Какие неявные, внутренние объекты и методы есть на JSP странице?

__JSP implicit objects (неявные объекты)__ создаются контейнером при конвертации JSP страницы в код сервлета для помощи 
разработчикам. Эти объекты можно использовать напрямую в скриптлетах для передачи информации в сервис методы, однако мы 
не можем использовать неявные объекты в JSP Declaration, т.к. такой код пойдет на уровень класса.

Существует 9 видов неявных объектов, которые можно использовать прямо на JSP странице. Семь из них объявлены как локальные 
переменные в начале `_jspService()` метода, а два оставшихся могут быть использованы как аргументы метода `_jspService()`.
+ `out Object` : 

```
<strong>Current Time is</strong>: <% out.print(new Date()); %><br>
```

+ `request Object` : 

```
<strong>Request User-Agent</strong>: <%=request.getHeader("User-Agent") %><br>
```

+ `response Object` : 

```
<strong>Response</strong>: <%response.addCookie(new Cookie("Test","Value")); %>
```

+ `config Object` : 

```
<strong>User init param value</strong>: <%=config.getInitParameter("User") %><br>
```

+ `application Object` : 

```
<strong>User context param value</strong>: <%=application.getInitParameter("User") %><br>
``` 

+ `session Object` : 

```
<strong>User Session ID</strong>: <%=session.getId() %><br>
```

+ `pageContext Object` :

```
<% pageContext.setAttribute("Test", "Test Value"); %> 
<strong>PageContext attribute</strong>: {Name="Test",Value="<%=pageContext.getAttribute("Test") %>"}<br>
```

+ `page Object` : 

```
<strong>Generated Servlet Name</strong>: <%=page.getClass().getName() %>
```

+ `exception Object` : 

``` 
<strong>Exception occured</strong>: <%=exception %><br>
```

[к оглавлению](#jspjstl)

## 15. Какие неявные объекты не доступны в обычной JSP странице?

Неявный объект исключений JSP недоступен в обычных JSP страницах и используется на страницах ошибок JSP (_errorpage_) 
только для того, чтобы перехватить исключение, выброшенное JSP страницей и далее предоставить какую-либо полезную информацию клиенту.

[к оглавлению](#jspjstl)

## 16. Что вы знаете о `PageContext` и какие преимущества его использования?

Неявный объект JSP - экземпляр класса `javax.servlet.jsp.PageContext` предоставляет доступ ко всем пространствам имён, 
ассоциированным с JSP-страницей, а также к различным её атрибутам.
Остальные неявные объекты добавляются к `pageContext` автоматически.

Класс `PageContext` это абстрактный класс, а его экземпляр можно получить через вызов метода `JspFactory.getPageContext()`, 
и освободить через вызов метода `JspFactory.releasePageContext()`.

`PageContext` обладает следующим набором особенностей и возможностей:
+ единый API для обслуживания пространств имён различных областей видимости;
+ несколько удобных API для доступа к различным `public`-объектам;
+ механизм получения `JspWriter` для вывода;
+ механизм обслуживания использования сессии страницей;
+ механизм экспонирования («показа») атрибутов директивы `page` среде скриптинга;
+ механизмы направления или включения текущего запроса в другие компоненты приложения;
+ механизм обработки процессов исключений на страницах ошибок _errorpage_;

[к оглавлению](#jspjstl)

## 17. Как сконфигурировать параметры инициализации для JSP?

Параметры инициализации для JSP задаются в `web.xml` файле аналогично сервлетам - элементами `servlet` и `servlet-mapping`. 
Единственным отличием будет указание местонахождения JSP страницы:

```xml
<servlet>
    <servlet-name>Example</servlet-name>
    <jsp-file>/WEB-INF/example.jsp</jsp-file>
    <init-param>
        <param-name>exampleParameter</param-name>
        <param-value>parameterValue</param-value>
    </init-param>
</servlet>
```

[к оглавлению](#jspjstl)

## 18. Почему не рекомендуется использовать скриплеты (скриптовые элементы) в JSP?

JSP страницы используются в основном  для целей отображения представления (_view_), а вся бизнес-логика (_controller_) и 
модель (_model_) должны быть реализованы в сервлетах или классах-моделях. 

Обязанность JSP страницы - создание HTML ответа из переданных через атрибуты параметров. Большая часть JSP содержит 
HTML код а для того, чтобы помочь верстальщикам понять JSP код страницы предоставляется функционал 
элементов _action_, _JSP EL_, _JSP Standart Tag Library_. Именно их и необходимо использовать вместо скриптлетов 
для создания моста между (JSP)HTML и (JSP)Java частями.

[к оглавлению](#jspjstl)

## 19. Можно ли определить класс внутри JSP страницы?

Определить класс внутри JSP страницы можно, но это считается плохой практикой:

```java
<%!
private static class ExampleOne {
  //...
}
%>

<%
private class ExampleTwo {
  //...
}
%>
```

[к оглавлению](#jspjstl)

## 20. Что вы знаете о Языке выражений JSP (JSP Expression Language – EL)?

__JSP Expression Language (EL)__ — скриптовый язык выражений, который позволяет получить доступ к Java компонентам (JavaBeans) 
из JSP. Начиная с JSP 2.0 используется внутри JSP тегов для отделения Java кода от JSP для обеспечения лёгкого доступа 
к Java компонентам, уменьшая при этом количество кода Java в JSP-страницах, или даже полностью исключая его.

Развитие EL происходило с целью сделать его более простым для дизайнеров, которые имеют минимальные познания в языке 
программирования Java. До появления языка выражений, JSP имел несколько специальных тегов таких как скриптлеты (англ.), 
выражения и т. п. которые позволяли записывать Java код непосредственно на странице. 
С использованием языка выражений веб-дизайнер должен знать только то, как организовать вызов соответствующих java-методов.

Язык выражений JSP 2.0 включает:
+ Создание и изменение переменных.
+ Управление потоком выполнения программы: ветвление, выполнение различных типов итераций и т.д.
+ Упрощенное обращение к встроенным JSP-объектам.
+ Возможность создавать собственные функции.

Язык выражений используется внутри конструкции `${ ... }`. Подобная конструкция может размещаться либо отдельно, 
либо в правой части выражения установки атрибута тега.

[к оглавлению](#jspjstl)

## 21. Какие типы EL операторов вы знаете?

Операторы в EL поддерживают наиболее часто используемые манипуляции данными.

Типы операторов:
+ Стандартные операторы отношения: `==` (или `eq`), `!=` (или `neq`), `<` (или `lt`), `>` (или `gt`), `<=` (или `le`), `>=` (или `ge`).
+ Арифметические операторы: `+`, `–`, `*`, `/` (или `div`), `%` (или `mod`).
+ Логические операторы: `&&` (или `and`), `||` (или `or`), `!` (или `not`).
+ Оператор `empty` – используется для проверки переменной на `null`, или «пустое значение», который зависит от типа 
проверяемого объекта. Например, нулевая длина для строки или нулевой размер для коллекции.

[к оглавлению](#jspjstl)

## 22. Назовите неявные, внутренние объекты JSP EL и их отличия от объектов JSP.

Язык выражений JSP предоставляет множество неявных объектов, которые можно использовать для получения атрибутов в различных 
областях видимости (scopes) и для значений параметров. Важно отметить, что они отличаются от неявных объектов JSP и содержат 
атрибуты в заданной области видимости. Наиболее часто использующийся implicit object в JSP EL и JSP page — это объект pageContext. 
Ниже представлена таблица неявных объектов JSP EL.

[к оглавлению](#jspjstl)

## 23. Как отключить возможность использования EL в JSP?

Для игнорирования выполнения языка выражений на странице существует два способа:
+ использовать директиву `<%@ page isELIgnored = «true» %>`,
+ настроить `web.xml` (лучше подходит для отключения EL сразу на нескольких страницах):

```xml
<jsp-config>
    <jsp-property-group>
        <url-pattern>*.jsp</url-pattern>
        <el-ignored>true</el-ignored>
    </jsp-property-group>
</jsp-config>
```

[к оглавлению](#jspjstl)

## 24. Как узнать тип HTTP метода используя JSP EL?

`${pageContext.request.method}`.

[к оглавлению](#jspjstl)

## 25. Что такое _JSTL (JSP Standard tag library)_?

__JavaServer Pages Standard Tag Library, JSTL, Стандартная библиотека тегов JSP__ — расширение спецификации JSP 
(конечный результат _JSR 52_), добавляющее библиотеку JSP тегов для общих нужд, таких как разбор XML данных, 
условная обработка, создание циклов и поддержка интернационализации.

JSTL является альтернативой такому виду встроенной в JSP логики, как _скриплеты_ (прямые вставки Java кода). 
Использование стандартизованного множества тегов предпочтительнее, поскольку получаемый код легче поддерживать и проще 
отделять бизнес-логику от логики отображения.

Для использования JSTL тегов необходимо:
+ подключить зависимости, например в `pom.xml`:

```xml
<dependency>
    <groupId>jstl</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency>
<dependency>
    <groupId>taglibs</groupId>
    <artifactId>standard</artifactId>
    <version>1.1.2</version>
</dependency>
```

+ указать пространство имен основных тегов JSTL через указание на JSP странице код:

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/xml" prefix="x" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
```

https://www.tutorialspoint.com/jsp/jsp_standard_tag_library.htm

[к оглавлению](#jspjstl)

## 26. Из каких групп тегов состоит библиотека _JSTL_?

Группы тегов JSTL согласно их функциональности:
+ _Core Tags_ предоставляют возможности итерации, обработки исключений, URL, _forward_, _redirect response_ и т.д.
+ _Formatting Tags_ и _Localization Tags_ предоставляют возможности по форматированию чисел, дат и поддержки 
_i18n_ локализации и _resource bundles_.
+ _SQL Tags_ – поддержка работы с базами данных.
+ _XML Tags_ используются для работы с XML документами: парсинга, преобразования данных, выполнения выражений _XPath_ и т.д..
+ _JSTL Functions Tags_ предоставляет набор функций, которые позволяют выполнять различные операции со строками и т.п. 
Например, по конкатенации или разбиению строк.

[к оглавлению](#jspjstl)

## 27. Какая разница между `<c:set>` и `<jsp:useBean>`?

Оба тега создают и помещают экземпляры в заданную область видимости, но `<jsp:useBean>` только создаёт экземпляр конкретного 
типа, а `<c:set>`, создав экземпляр, позволяет дополнительно извлекать значение, например, из параметров запроса, сессии и т. д. 

[к оглавлению](#jspjstl)

## 28. Чем отличается `<c:import>` от `<jsp:include>` и директивы `<%@include %>`?

По сравнению с action-тегом `<jsp:include>` и директивой `<%@include %>` тег `<c:import>` обеспечивает более совершенное 
включение динамических ресурсов, т.к. получает доступ к источнику, чтение информации из которого происходит непосредственно 
без буферизации и контент включается в исходную JSP построчно.

[к оглавлению](#jspjstl)

## 29. Как можно расширить функциональность JSP?

## 30. Что вы знаете о написании пользовательских JSP тегов?

## 31. Приведите пример использования собственных тегов.

JSP можно расширить с помощью создания собственных тегов с необходимой функциональностью, которые можно добавить в 
библиотеку тегов на страницу JSP указав необходимое пространство имен. 

> /WEB-INF/exampleTag.tld

```xml
<?xml version="1.0" encoding="UTF-8"?>
<taglib version="2.1" xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee web-jsptaglibrary_2_1.xsd">
    <tlib-version>1.0</tlib-version>
    <short-name>example</short-name>
    <uri>/WEB-INF/exampleTag</uri>
    <tag>
        <name>exampleTag</name>
        <tag-class>xyz.company.ExampleTag</tag-class>
        <body-content>empty</body-content>
        <info>The example tag displays Hello World!</info>
    </tag>
</taglib>
```

> xyz.company.ExampleServlet.java

```java
package xyz.company;

import java.io.IOException;

import javax.servlet.jsp.JspException;
import javax.servlet.jsp.tagext.TagSupport;

public class ExampleTag extends TagSupport {
    private static final long serialVersionUID = 1L;
    
    @Override
    public int doStartTag() throws JspException {
        try {
            pageContext.getOut().print("Hello World!");
        } catch(IOException ioException) {
            throw new JspException("Error: " + ioException.getMessage());
        }       
        return SKIP_BODY;
    }
}
```

> exampleTag.jsp

```
<%@ taglib uri="/WEB-INF/exampleTag.tld" prefix="example"%>
<%@ page session="false" pageEncoding="UTF-8"%>
<html>
<head>
<title>Example Tag</title>
</head>
<body>
    <h1>Example Tag</h1>
    <p><example:exampleTage /><p>
</body>
</html>
```

Также в пользовательских тегах существует возможность задать входные параметры. 
Например, существует необходимость отформатировать каким-либо стилем очень длинное число. 

Для этого можно использовать собственный тег по типу: 
`<mytags:formatNumber number="123456.789" format="#,## #.00"/>`

Используя входные параметры, число должно быть преобразовано на JSP странице в таком виде `123,456.79` согласно шаблону. 
Т.к. JSTL не предоставляет такой функциональности, необходимо создать пользовательский тег для получения необходимого результата.

[к оглавлению](#jspjstl)

## 32. Как сделать перенос строки в HTML средствами JSP?

Для переноса строки можно использовать тег `c:out` и атрибут `escapeXml`, который отключает обработку HTML элементов. 
В этом случае браузер получит следующий код в виде строки и обработает элемент `<br>` как требуется:
`<c:out value="<br> creates a new line in HTML" escapeXml="true"></c:out>`

[к оглавлению](#jspjstl)

## 33. Почему не нужно конфигурировать стандартные JSP теги в `web.xml`?

Стандартные теги JSP не конфигурируются в `web.xml`, потому что tld файлы уже находятся внутри каталога `/META-INF/` 
в jar файлах JSTL. 

Когда контейнер загружает веб-приложение и находит tld файлы в в jar файле в директории `/META-INF/`, 
то он автоматически настраивает их для непосредственного использования на JSP страницах. 
Остается только задать пространство имен на JSP странице.

[к оглавлению](#jspjstl)

## 34. Как можно обработать ошибки JSP страниц?

Для обработки исключений выброшенных на JSP странице достаточно лишь задать страницу ошибки JSP и при её создании 
установить значение _page directive attribute_ `isErrorPage` в значение `true`. 
Таким образом будет предоставлен доступ к неявным объектам исключений в JSP и появится возможность передавать собственные, 
более информативные сообщения об ошибках клиенту. При этом настройка дескриптора развертывания выглядит так:

```xml
<error-page>
     <error-code>404</error-code>
     <location>/error.jsp</location>
</error-page>
  
<error-page>
     <exception-type>java.lang.Throwable</exception-type>
     <location>/error.jsp</location>
</error-page>
```

[к оглавлению](#jspjstl)

## 35. Как происходит обработка ошибок с помощью JSTL?

Для перехвата и обработки исключений в служебных методах класса служат JSTL Core Tags `c:catch` и `c:if`. 

> Тег `c:catch` перехватывает исключение и обертывает его в переменную `exception`, доступную для обработки в теге `c:if`:

```
<c:catch var ="exception">
   <% int x = 42/0;%>
</c:catch>  
<c:if test = "${exception ne null}">
   <p>Exception is : ${exception} <br />
   Exception Message: ${exception.message}</p>
</c:if>
```

Обратите внимание что используется язык выражений JSP EL в теге `c:if`.

[к оглавлению](#jspjstl)

## 36. Как конфигурируется JSP в дескрипторе развертывания.

Для настройки различных параметров JSP страниц используется элемент `jsp-config`, который отвечает за:
+ управление элементами скриптлетов на странице;
+ управления выполнением в языке выражений;
+ определение шаблона URL для encoding;
+ определение размера буфера, который используется для объектов на странице;
+ обозначение групп ресурсов, соответствующих шаблону URL, которые должны быть обработаны как XML документ.

```xml
<jsp-config>
    <taglib>
        <taglib-uri>http://company.xyz/jsp/tlds/customtags</taglib-uri>
        <taglib-location>/WEB-INF/exampleTag.tld</taglib-location>
    </taglib>
</jsp-config>
```

[к оглавлению](#jspjstl)

## 37. Можно ли использовать Javascript на JSP странице?

Да, это возможно. Несмотря на то, что JSP это серверная технология, на выходе она всё равно создает `HTML` страницу, 
на которую можно добавлять Javascript и CSS.

[к оглавлению](#jspjstl)

## 38. Всегда ли создается объект сессии на JSP странице, можно ли отключить его создание?

Jsp-страница, по умолчанию, всегда создает сессию. Используя директиву `page` с атрибутом `session` можно изменить 
это поведение:

`<%@ page session ="false" %>`

[к оглавлению](#jspjstl)

## 39. Какая разница между `JSPWriter` и сервлетным `PrintWriter`?

`PrintWriter` является объектом отвечающим за запись содержания ответа на запрос. 
`JspWriter` использует объект `PrintWriter` для буферизации. Когда буфер заполняется или сбрасывается, 
`JspWriter` использует объект `PrintWriter` для записи содержания в ответ.

[к оглавлению](#jspjstl)

## 40. Опишите общие практические принципы работы с JSP.

Хорошей практикой работы с технологией JSP является соблюдение следующих правил:
+ Следует избегать использования элементов скриптлетов на странице. Если элементы _action_, _JSTL_, _JSP EL_ 
не удовлетворяют потребностям, то желательно написать собственный тег.
+ Рекомендуется использовать разные виды комментариев: так JSP комментарии необходимы для уровня кода и отладки, 
т.к. они не будут показаны клиенту.
+ Не стоит размещать какой-либо бизнес логики внутри JSP страницы. Страницы должны использоваться только для создания 
ответов клиенту.
+ Для повышения производительности лучше отключать создание сессии на странице, когда это не требуется.
+ Директивы `taglib`, `page` в начале JSP страницы улучшают читабельность кода.
+ Следует правильно использовать директиву `include` и элемент `jsp:include action`. 
Первая используется для статических ресурсов, а второй для динамических ресурсов времени выполнения.
+ Обработку исключений нужно производить с помощью страниц ошибок. Это помогает избегать запуска специальных 
служебных методов и может повысить производительность.
+ Использующиеся CSS и JavaScript должны быть разнесены в разные файлы и подключаться в начале страницы.
+ В большинстве случаев JSTL должно хватать для всех нужд. Если это не так, то в начале следует проанализировать 
логику своего приложения, и попробовать перенести выполнения кода в сервлет, 
а далее с помощью установки атрибутов использовать на JSP странице только результат.

[к оглавлению](#jspjstl)

Туториалы:

JSP https://www.tutorialspoint.com/jsp/index.htm

JSTL https://www.tutorialspoint.com/jsp/jsp_standard_tag_library.htm